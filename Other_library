#author SryMkr
#date 2020.1.14

# The library consists of some basic functions
# to support Snake Game


# import packages
import pygame
import random
import numpy as np

# 26 alphabet
ALPHABET_LIST = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T',
                 'U', 'V', 'W', 'X', 'Y', 'Z']

# show general texts of screen
def print_text(font_size, x_coordinate, y_coordinate, text, color=(0, 0, 0)):
    # return a surface
    text_img = font_size.render(text, True, color)
    # get window/screen/display surface  return surface
    screen = pygame.display.get_surface()
    # built surface onto screen
    screen.blit(text_img, (x_coordinate, y_coordinate))


# show game results of screen
def print_result(font_size, x_start, y_start, list, color=(0,0,0)):
    # get window/screen/display surface  return surface
    screen = pygame.display.get_surface()
    # show the completed English words
    for text in list:
        # return a surface
        text_img = font_size.render(text, True, color)
        # draw result one by one
        screen.blit(text_img, (x_start, y_start))
        # change the x coordinate
        x_start += 240
        # change the y coordinate
        if x_start > 30 * 16:
            x_start = 0
            y_start += 60


# get index of words task
# get the counterpart index of alphabet
def built_spelling_dic(task_list, alphabet_list):
    # create empty dictionary
    spelling_dic = {}
    # spelling index
    spelling_index = 1
    # task index
    task_index = 1
    # reture an alphabet dictionary for show correct alphabet
    for word in task_list:
        for correct_spelling in word:
            # find out every alphabet index
            alphabet_index = alphabet_list.index(correct_spelling)
            # built dictionary
            spelling_dic["{}-{}".format(task_index, spelling_index)] = alphabet_index
            # alphabet number plus 1 只是为了保证字典键值唯一，其他作用有待开发
            spelling_index += 1
        # word number plus 1
        # word_index is to track current word task
        task_index += 1
    # return dictionary
    return spelling_dic


# set audio of game
def game_audio(filename,volumn=0.7):
    #initialize the mixer
    pygame.mixer.init()
    # get the sound file
    sound = pygame.mixer.Sound(filename)
    # force to find a channel
    channel = pygame.mixer.find_channel(True)
    # set music volume
    channel.set_volume(volumn)
    # directly play once call
    channel.play(sound)


# save game records
def save_record(filename, highest_record):
    with open(filename, 'w') as f:
        f.write(str(highest_record))


# load game records
def load_record(filename):
    with open(filename, 'r') as f:
        record = f.read()
    return record


# for three different position of three different food
# in case they overlap

def food_random_position():
    # create x coordinate list
    x_coordinate_list = list(np.arange(0, 27)*30)
    # create y coordinate list
    y_coordinate_list = list(np.arange(6, 18)*30)
    # randomly choose three x coordinate
    x_coordinate = random.sample(x_coordinate_list, 3)
    # randomly choose three y coordinate
    y_coordinate = random.sample(y_coordinate_list, 3)
    # return the x, y coordinate
    return x_coordinate, y_coordinate


# define the snake head direction
def snake_head_direction(snake, snake_direction):
    # up
    if snake_direction.second_variate < 0:
        snake.snake_head.first_frame = 1 * snake.snake_head.multi_frames_columns
        snake.snake_head.last_frame = snake.snake_head.first_frame + 1
    #down
    elif snake_direction.second_variate > 0:
        snake.snake_head.first_frame = 3 * snake.snake_head.multi_frames_columns
        snake.snake_head.last_frame = snake.snake_head.first_frame + 1
    #lift
    elif snake_direction.first_variate < 0:
        snake.snake_head.first_frame = 0 * snake.snake_head.multi_frames_columns
        snake.snake_head.last_frame = snake.snake_head.first_frame + 1
    # right
    elif snake_direction.first_variate > 0:
        snake.snake_head.first_frame = 2 * snake.snake_head.multi_frames_columns
        snake.snake_head.last_frame = snake.snake_head.first_frame + 1


# define two variate with two method respectively
class two_Variate(object):
    # define two private variates
    def __init__(self, variate_one, variate_two):
        self.__x = variate_one
        self.__y = variate_two

    # get first variate
    def get_variate_one(self): return self.__x
    # set first variate
    def set_variate_one(self, x): self.__x = x
    # the function of property is to allow variate_one have the two method
    # automatically trigger when calling
    # (property has claimed  the class property
    # therefore, there is not self before first_variate)
    first_variate = property(get_variate_one, set_variate_one)

    # get second variate
    def get_variate_two(self): return self.__y
    # set second variate
    def set_variate_two(self, y): self.__y = y
    # the function of property is to allow variate_one have the two method
    # automatically trigger when calling
    second_variate = property(get_variate_two, set_variate_two)




